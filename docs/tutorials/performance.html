<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-tutorials/performance">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Podman performance guide | Podman</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://containers.github.io/docs/tutorials/performance"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Podman performance guide | Podman"><meta data-rh="true" name="description" content="The performance of Podman may be influenced by a number of factors, such as,"><meta data-rh="true" property="og:description" content="The performance of Podman may be influenced by a number of factors, such as,"><link data-rh="true" rel="icon" href="/favicon.ico"><link data-rh="true" rel="canonical" href="https://containers.github.io/docs/tutorials/performance"><link data-rh="true" rel="alternate" href="https://containers.github.io/docs/tutorials/performance" hreflang="en"><link data-rh="true" rel="alternate" href="https://containers.github.io/docs/tutorials/performance" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Podman RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Podman Atom Feed"><link rel="stylesheet" href="/assets/css/styles.c7b42a21.css">
<link rel="preload" href="/assets/js/runtime~main.25dcd20e.js" as="script">
<link rel="preload" href="/assets/js/main.785fca3d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/logos/optimized/podman-3-logo-95w-90h.webp" alt="Podman Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/logos/optimized/podman-3-logo-95w-90h.webp" alt="Podman Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">podman</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/features">Features</a><a class="navbar__item navbar__link" href="/get-started">Get Started</a><a class="navbar__item navbar__link" href="/community">Community</a><a href="https://blog.podman.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Development Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/podman">Documentation</a><a href="https://github.com/containers/website-new" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/logos/optimized/podman-3-logo-95w-90h.webp" alt="Podman Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/logos/optimized/podman-3-logo-95w-90h.webp" alt="Podman Logo" class="themedImage_ToTc themedImage--dark_i4oU"><b>podman</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/podman">Podman</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/first-steps">First Steps</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/tutorials/basic_networking">Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/basic_networking">Basic Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/image_signing">How to sign and distribute container images using Podman</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/mac_client">Podman Mac Client Tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/mac_win_client">Podman Remote clients for macOS and Windows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/performance">Podman performance guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/podman-derivative-api">podman-derivative-api</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/podman-for-windows">podman-for-windows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/podman-install-certificate-authority">podman-install-certificate-authority</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/podman_tutorial">podman_tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/podman_tutorial_cn">podman_tutorial_cn</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/qemu-remote-tutorial">Podman-remote client for Windows with QEMU VM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/remote_client">Podman remote-client tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/rootless_tutorial">rootless_tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/socket_activation">Podman socket activation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials">Tutorials</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/commands/podman-attach">Commands</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tutorials</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Podman performance guide</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Podman performance guide</h1><p>The performance of Podman may be influenced by a number of factors, such as,</p><ul><li>the specified Podman command-line options and configuration</li><li>the OCI runtime</li><li>the host file system</li><li>the container image</li></ul><p>Changing any of these may or may not have any noticeable effect on the performance of Podman on your system.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-a-separate-user-account-for-benchmarking">Using a separate user account for benchmarking<a href="#using-a-separate-user-account-for-benchmarking" class="hash-link" aria-label="Direct link to Using a separate user account for benchmarking" title="Direct link to Using a separate user account for benchmarking">​</a></h2><p>Some performance tips, such as using a different storage driver would require the user to run <code>podman system reset</code>,
which erases all containers and container images for the user.
Instead of benchmarking different alternatives in your own home directory, you could create a new user
that afterwards can be removed.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-specify-the-storage-driver-vfs-and-run-bintrue-in-an-alpine-container">Example: Specify the storage driver <em>vfs</em> and run <code>/bin/true</code> in an Alpine container<a href="#example-specify-the-storage-driver-vfs-and-run-bintrue-in-an-alpine-container" class="hash-link" aria-label="Direct link to example-specify-the-storage-driver-vfs-and-run-bintrue-in-an-alpine-container" title="Direct link to example-specify-the-storage-driver-vfs-and-run-bintrue-in-an-alpine-container">​</a></h3><p>Interactively</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo useradd testuser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo machinectl testuser@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">podman pull docker.io/library/alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/usr/bin/time -v podman --storage-driver=vfs run --rm docker.io/library/alpine /bin/true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Noninteractively</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo useradd testuser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemd-run --machine=testuser@ --quiet --user --collect --pipe --wait \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   podman --storage-driver=vfs pull docker.io/library/alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemd-run --machine=testuser@ --quiet --user --collect --pipe --wait \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   /usr/bin/time -v podman --storage-driver=vfs run --rm docker.io/library/alpine /bin/true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The command <code>/usr/bin/time -v</code> measures and displays benchmarking information.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="performance-considerations">Performance considerations<a href="#performance-considerations" class="hash-link" aria-label="Direct link to Performance considerations" title="Direct link to Performance considerations">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="use-a-fast-oci-runtime">Use a fast OCI runtime<a href="#use-a-fast-oci-runtime" class="hash-link" aria-label="Direct link to Use a fast OCI runtime" title="Direct link to Use a fast OCI runtime">​</a></h3><p>Podman uses an OCI runtime when running containers.
The fastest OCI runtime is probably <a href="https://github.com/containers/crun" target="_blank" rel="noopener noreferrer"><strong>crun</strong></a>.</p><p>Check that you are using crun</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ podman info --format={{.Host.OCIRuntime.Name}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crun</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To benchmark an OCI runtime, create a test user account and
specify the OCI runtime path with <a href="https://docs.podman.io/en/latest/markdown/podman.1.html#runtime-value" target="_blank" rel="noopener noreferrer"><strong>--runtime</strong></a>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="choosing-a-storage-driver">Choosing a storage driver<a href="#choosing-a-storage-driver" class="hash-link" aria-label="Direct link to Choosing a storage driver" title="Direct link to Choosing a storage driver">​</a></h3><p>The following storage drivers are listed from fastest to slowest:</p><ol><li>native overlayfs</li><li>fuse-overlayfs</li><li>vfs</li></ol><p>Using native overlayfs as an unprivileged user is only available for Podman version &gt;= 3.1 on a Linux kernel version &gt;= 5.12.</p><p>To show the current storage driver</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ podman info -f {{.Store.GraphDriverName}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ podman info -f &#x27;{{index .Store.GraphStatus &quot;Native Overlay Diff&quot;}}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>Storage driver</th><th>Result of <code>podman info -f {{.Store.GraphDriverName}}</code></th><th>Result of <code>podman info -f &#x27;{{index .Store.GraphStatus &quot;Native Overlay Diff&quot;}}</code></th></tr></thead><tbody><tr><td>native overlayfs</td><td>overlay</td><td>true</td></tr><tr><td>fuse-overlayfs</td><td>overlay</td><td>false</td></tr><tr><td>VFS</td><td>vfs</td><td>false</td></tr></tbody></table><p>Before changing the storage driver, running <code>podman system reset</code> is required.
The command erases all containers and container images for the user.
See the example above &quot;<em>Using a separate user account for benchmarking</em>&quot; for how to benchmark a storage driver in a separate test account.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="specifying-the-storage-driver-with-command-line-options">Specifying the storage driver with command-line options<a href="#specifying-the-storage-driver-with-command-line-options" class="hash-link" aria-label="Direct link to Specifying the storage driver with command-line options" title="Direct link to Specifying the storage driver with command-line options">​</a></h4><table><thead><tr><th>Storage driver</th><th>Podman command</th></tr></thead><tbody><tr><td>native overlayfs</td><td><code>podman --storage-driver=overlay run ...</code></td></tr><tr><td>fuse-overlayfs</td><td><code>podman --storage-driver=overlay --storage-opt overlay.mount_program=/usr/bin/fuse-overlayfs run ...</code></td></tr><tr><td>VFS</td><td><code>podman --storage-driver=vfs run ...</code></td></tr></tbody></table><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="configuring-the-default-storage-driver">Configuring the default storage driver<a href="#configuring-the-default-storage-driver" class="hash-link" aria-label="Direct link to Configuring the default storage driver" title="Direct link to Configuring the default storage driver">​</a></h4><p>The default storage driver can be configured in
<em>/etc/containers/storage.conf</em> and overridden by a user in
<em>~/.config/containers/storage.conf</em></p><p>To configure native overlayfs:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[storage]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">driver = &quot;overlay&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To configure fuse-overlayfs:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[storage]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">driver = &quot;overlay&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[storage.options.overlay]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mount_program = &quot;/usr/bin/fuse-overlayfs&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To configure VFS:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[storage]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">driver = &quot;vfs&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See storage.conf(5) for all available configuration settings.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="network-performance-for-rootless-podman">Network performance for rootless Podman<a href="#network-performance-for-rootless-podman" class="hash-link" aria-label="Direct link to Network performance for rootless Podman" title="Direct link to Network performance for rootless Podman">​</a></h3><p>When using rootless Podman, network traffic is normally passed through
<a href="https://github.com/containers/podman/blob/main/docs/tutorials/basic_networking.md#slirp4netns" target="_blank" rel="noopener noreferrer">slirp4netns</a>.
This comes with a performance penalty.</p><p>You can avoid using slirp4netns in the following ways:</p><ul><li><p>Use socket activation for listening network sockets. Communication over the activated socket does not pass through
slirp4netns, so it has the same performance characteristics as the normal network on the host.
Socket-activated services can be started and stopped in different ways:</p><ul><li>Let systemd start the service when the first client connects. Let the service terminate by itself after some time of inactivity.
Using a service on demand, can free up compute resources.</li><li>Start the service explicitly (<code>systemctl --user enable foobar.service</code>). If the service is already
running when the first client connects, there will be no delay due to container startup.
The <a href="https://github.com/containers/podman/blob/main/docs/tutorials/socket_activation.md" target="_blank" rel="noopener noreferrer">socket activation tutorial</a>
provides more information about socket activation support in Podman.</li></ul></li><li><p>Use the network driver <a href="https://passt.top/passt/about/#pasta" target="_blank" rel="noopener noreferrer"><em>pasta</em></a>. Pasta is under development and currently needs a patched Podman to run.</p></li><li><p>Set up the network manually as root. Create a bridge and virtual ethernet pair (VETH). See the <a href="https://lists.podman.io/archives/list/podman@lists.podman.io/thread/W6MCYO6RY5YFRTSUDAOEZA7SC2EFXRZE/" target="_blank" rel="noopener noreferrer">example</a> posted on the Podman mailing list. See also the section <em>DIY networking</em> in <a href="https://podman.io/community/meeting/notes/2021-10-05/Podman-Rootless-Networking.pdf" target="_blank" rel="noopener noreferrer">Podman-Rootless-Networking.pdf</a>.</p></li><li><p>Use <code>--network=host</code>. No network namespace is created. The container will use the host’s network.
Note: By using <code>--network=host</code>, the container is given full access to local system services such as D-bus and is therefore considered insecure.</p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lazy-pulling-of-container-images">Lazy pulling of container images<a href="#lazy-pulling-of-container-images" class="hash-link" aria-label="Direct link to Lazy pulling of container images" title="Direct link to Lazy pulling of container images">​</a></h3><p>Podman supports lazy pulling for the following container image formats:</p><ul><li><p><strong>zstd:chunked</strong></p></li><li><p><strong>eStargz</strong></p></li></ul><p><strong>zstd:chunked</strong> has better performance than <strong>eStargz</strong>.</p><p>See the article <a href="https://www.redhat.com/sysadmin/faster-container-image-pulls" target="_blank" rel="noopener noreferrer"><em>Pull container images faster with partial pulls</em></a> by Giuseppe Scrivano and Dan Walsh.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="choosing-a-host-file-system">Choosing a host file system<a href="#choosing-a-host-file-system" class="hash-link" aria-label="Direct link to Choosing a host file system" title="Direct link to Choosing a host file system">​</a></h3><p>Lazy pulling of container images can run more efficiently when the file system has reflink support. The file systems XFS and BTRFS have reflink support.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="option---log-driver">Option --log-driver<a href="#option---log-driver" class="hash-link" aria-label="Direct link to Option --log-driver" title="Direct link to Option --log-driver">​</a></h3><p>The <code>podman run</code> option <a href="https://docs.podman.io/en/latest/markdown/podman-run.1.html#log-driver-driver" target="_blank" rel="noopener noreferrer"><strong>--log-driver</strong></a> specifies the logging driver for the container.</p><p>If logging is not needed, consider using <code>--log-driver=none</code> to disable logging.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="reuse-the-package-repository-cache-when-building-container-images">Reuse the package repository cache when building container images<a href="#reuse-the-package-repository-cache-when-building-container-images" class="hash-link" aria-label="Direct link to Reuse the package repository cache when building container images" title="Direct link to Reuse the package repository cache when building container images">​</a></h3><p>The first step of a container build is often to download metadata from
the package repositories and post-process that data.</p><p>To speed up container builds, you could prepare a directory on the host
that contains the package metadata and then make the directory available
to the container build by using an <em>overlay mount</em>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example--speed-up-podman-build-by-reusing-the-dnf-metadata-cache">Example : Speed up <em>podman build</em> by reusing the DNF metadata cache<a href="#example--speed-up-podman-build-by-reusing-the-dnf-metadata-cache" class="hash-link" aria-label="Direct link to example--speed-up-podman-build-by-reusing-the-dnf-metadata-cache" title="Direct link to example--speed-up-podman-build-by-reusing-the-dnf-metadata-cache">​</a></h4><p>In this example the containers are based on Fedora 36.</p><p>First create an empty directory on the host, for example <em>$HOME/dnf_cache_f36</em>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ mkdir $HOME/dnf_cache_f36</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Fill the directory with the most recent <strong>dnf</strong> metadata cache.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ podman run --rm -v $HOME/dnf_cache_f36:/var/cache/dnf:Z registry.fedoraproject.org/fedora:36 dnf makecache</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a new directory, for example, <em>$HOME/ctr</em> and a file <em>$HOME/ctr/Containerfile</em> with these contents</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM registry.fedoraproject.org/fedora:36</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN dnf -y update &amp;&amp; dnf -y install cowsay &amp;&amp; dnf clean all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To build the Containerfile using the prepared metadata cache, provide the directory <em>$HOME/dnf_cache_f36</em> as an <em>overlay mount</em> (volume option <code>:O</code>)</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ podman build -v $HOME/dnf_cache_f36:/var/cache/dnf:O -t cowsay $HOME/ctr</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The article <a href="https://www.redhat.com/sysadmin/speeding-container-buildah" target="_blank" rel="noopener noreferrer"><em>Speeding up container image builds with Buildah</em></a> by Dan Walsh provides more details.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/containers/website-new/docs/tutorials/performance.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/tutorials/mac_win_client"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Podman Remote clients for macOS and Windows</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tutorials/podman-derivative-api"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">podman-derivative-api</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#using-a-separate-user-account-for-benchmarking" class="table-of-contents__link toc-highlight">Using a separate user account for benchmarking</a><ul><li><a href="#example-specify-the-storage-driver-vfs-and-run-bintrue-in-an-alpine-container" class="table-of-contents__link toc-highlight">Example: Specify the storage driver <em>vfs</em> and run <code>/bin/true</code> in an Alpine container</a></li></ul></li><li><a href="#performance-considerations" class="table-of-contents__link toc-highlight">Performance considerations</a><ul><li><a href="#use-a-fast-oci-runtime" class="table-of-contents__link toc-highlight">Use a fast OCI runtime</a></li><li><a href="#choosing-a-storage-driver" class="table-of-contents__link toc-highlight">Choosing a storage driver</a></li><li><a href="#network-performance-for-rootless-podman" class="table-of-contents__link toc-highlight">Network performance for rootless Podman</a></li><li><a href="#lazy-pulling-of-container-images" class="table-of-contents__link toc-highlight">Lazy pulling of container images</a></li><li><a href="#choosing-a-host-file-system" class="table-of-contents__link toc-highlight">Choosing a host file system</a></li><li><a href="#option---log-driver" class="table-of-contents__link toc-highlight">Option --log-driver</a></li><li><a href="#reuse-the-package-repository-cache-when-building-container-images" class="table-of-contents__link toc-highlight">Reuse the package repository cache when building container images</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.podman.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/x5GzFF6QH4" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.podman.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/containers/website-new" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Podman. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.25dcd20e.js"></script>
<script src="/assets/js/main.785fca3d.js"></script>
</body>
</html>