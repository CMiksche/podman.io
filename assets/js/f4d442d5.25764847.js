"use strict";(self.webpackChunkpodman=self.webpackChunkpodman||[]).push([[61554],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),d=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=d(e.components);return o.createElement(s.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=d(n),u=a,h=c["".concat(s,".").concat(u)]||c[u]||m[u]||r;return n?o.createElement(h,i(i({ref:t},p),{},{components:n})):o.createElement(h,i({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:a,i[1]=l;for(var d=2;d<r;d++)i[d]=n[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},25199:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var o=n(87462),a=(n(67294),n(3905));const r={title:"Announcing Podman v2.0",layout:"default",author:"baude",categories:["blogs"],tags:["containers","docker-compose","podman","networking","pod","api","rest","rest-api","v2","hpc"]},i=void 0,l={permalink:"/blog/2020/06/29/podman-v2-announce",source:"@site/blog/2020-06-29-podman-v2-announce.md",title:"Announcing Podman v2.0",description:"podman logo",date:"2020-06-29T00:00:00.000Z",formattedDate:"June 29, 2020",tags:[{label:"containers",permalink:"/blog/tags/containers"},{label:"docker-compose",permalink:"/blog/tags/docker-compose"},{label:"podman",permalink:"/blog/tags/podman"},{label:"networking",permalink:"/blog/tags/networking"},{label:"pod",permalink:"/blog/tags/pod"},{label:"api",permalink:"/blog/tags/api"},{label:"rest",permalink:"/blog/tags/rest"},{label:"rest-api",permalink:"/blog/tags/rest-api"},{label:"v2",permalink:"/blog/tags/v-2"},{label:"hpc",permalink:"/blog/tags/hpc"}],readingTime:3.985,hasTruncateMarker:!0,authors:[{name:"baude"}],frontMatter:{title:"Announcing Podman v2.0",layout:"default",author:"baude",categories:["blogs"],tags:["containers","docker-compose","podman","networking","pod","api","rest","rest-api","v2","hpc"]},prevItem:{title:"Announcing Podman v2.0",permalink:"/blog/2020/06/29/new"},nextItem:{title:"Update on Podman v2",permalink:"/blog/2020/05/13/new"}},s={authorsImageUrls:[void 0]},d=[{value:"By Brent Baude GitHub",id:"by-brent-baude-github",level:2},{value:"\u201cPay no attention to the man behind the curtain\u201d",id:"pay-no-attention-to-the-man-behind-the-curtain",level:2},{value:"RESTful API",id:"restful-api",level:2},{value:"Remote clients",id:"remote-clients",level:2},{value:"Auto-update",id:"auto-update",level:2},{value:"systemd Integration Improvements",id:"systemd-integration-improvements",level:2},{value:"Conclusion",id:"conclusion",level:2}],p={toc:d},c="wrapper";function m(e){let{components:t,...r}=e;return(0,a.kt)(c,(0,o.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"podman logo",src:n(1382).Z,width:"228",height:"61"})),(0,a.kt)("h1",{id:"announcing-podman-v2"},"Announcing Podman v2"),(0,a.kt)("h2",{id:"by-brent-baude-github"},"By Brent Baude ",(0,a.kt)("a",{parentName:"h2",href:"https://github.com/baude"},"GitHub")),(0,a.kt)("p",null,"If you have been following the upstream development of Podman, you have undoubtedly seen us refer to \u201c2.0\u201d or \u201cPodman 2\u201d. Today, we have made the first release of Podman 2 upstream. The release notes highlight many of the newest features but we wanted to call out some specific things in this blog and expand on them."),(0,a.kt)("h2",{id:"pay-no-attention-to-the-man-behind-the-curtain"},"\u201cPay no attention to the man behind the curtain\u201d"),(0,a.kt)("p",null,"Most of the changes to the new Podman should be transparent to end users. We did a significant amount of replumbing in our internals to allow for future enhancements and more closely align many of the code paths. There are some subtle changes to the outputs of some commands and fields within JSON formatted responses. They were largely done to create more consistency amongst our commands as well as driven by user feedback."),(0,a.kt)("h2",{id:"restful-api"},"RESTful API"),(0,a.kt)("p",null,"The biggest change in Podman 2 is our introduction of a RESTful API to interact with our libraries. In actuality, the RESTful service was present in earlier versions but was tagged experimental. We have also deprecated the previous API implementation based on varlink. We will publish more specific blogs and tutorials on how to use the API but consider this a little introduction."),(0,a.kt)("p",null,"The API was designed to have two layers: libpod and compatibility. The libpod layer allows you to interact directly with the libpod libraries. The compatibility layer is designed to emulate the Docker RESTful API to assist in migration of tools, applications, and services long-term to libpod. This can be made clearer with an example. Consider inspecting a container called \u2018foobar\u2019 with each layer. The endpoint paths would differ depending on the layers."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"/v1.24/containers/foobar   \u2190 compatibility call\n/v1.0/libpod/containers/foobar  \u2190 libpod call\n")),(0,a.kt)("p",null,"Furthermore, the results of each call will differ. The compatibility result will closely emulate the response from Docker."),(0,a.kt)("p",null,"Our preference is that people writing new code to interact with Podman should use the libpod layer only. This is a more sound long term strategy. But for people that need to migrate to Podman, the compatibility layer allows for a quick on-boarding. There are of course Docker endpoints we cannot or choose not to emulate due to incompatibities between Docker and Podman. Nevertheless, we have already seen some field success in migration of applications."),(0,a.kt)("p",null,"In keeping with Podman\u2019s history the restful API will work in both rootless and rootful mode. If you run in rootful mode, the podman service will listen on ",(0,a.kt)("inlineCode",{parentName:"p"},"/run/podman/podman.sock")," and rootless is ",(0,a.kt)("inlineCode",{parentName:"p"},"$XDG_RUNTIME_DIR/podman/podman.sock")," (for example: ",(0,a.kt)("inlineCode",{parentName:"p"},"/run/user/1000/podman/podman.sock"),"). If you install the podman-docker package, the package will set up a link between ",(0,a.kt)("inlineCode",{parentName:"p"},"run/docker/docker.sock")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"/run/podman/podman.sock"),"."),(0,a.kt)("h2",{id:"remote-clients"},"Remote clients"),(0,a.kt)("p",null,"One of the consequences of our re-plumbing work is that our remote clients for Windows, Mac, and Linux are significantly smaller in size. The interface for the remote client connection has also changed to more of a URI format. As a matter of process, we attach a binary version of the remote clients to each release."),(0,a.kt)("p",null,"It is also worth noting that a \u2018--remote\u2019 flag has been added to the Podman binary to allow it to act as a remote client."),(0,a.kt)("h2",{id:"auto-update"},"Auto-update"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"podman auto-update")," command allows for updating systemd-managed running containers when their images have been updated on the container registry. While it is still a tech preview in Podman v2.0, we added a number of improvements to better support authentication and to select the correct images on ARM. If you\u2019re interested in auto updates, please check them out and let us know what you think."),(0,a.kt)("h2",{id:"systemd-integration-improvements"},"systemd Integration Improvements"),(0,a.kt)("p",null,"A major improvement for Podman\u2019s systemd support is that ",(0,a.kt)("inlineCode",{parentName:"p"},"podman generate systemd")," now supports using the ",(0,a.kt)("inlineCode",{parentName:"p"},"--new")," flag on pods. This allows for creating shareable systemd units not only for containers but also for pods. Additionally, we added a number of changes to make the systemd units more robust and reliable, such as cleanly starting after a system crash and clean shutdowns even when conmon has been killed. The names of generated files can further be altered with the new ",(0,a.kt)("inlineCode",{parentName:"p"},"--container-prefix")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"--pod-prefix")," flags."),(0,a.kt)("h2",{id:"conclusion"},"Conclusion"),(0,a.kt)("p",null,"This is a major new version of Podman with the goal to support all of your local container engine needs. We sincerely hope that the new features meet your needs. We continue to develop new content based on the API including new bits to the API itself. Before making too many more changes, we will let Podman \u201cbake\u201d for a while before the next radical functions are added."),(0,a.kt)("p",null,"We would love to hear your feedback and look forward to working with the community on giving Podman users and developers the best container experience. Remember upstream Podman development usually hangs out on ",(0,a.kt)("strong",{parentName:"p"},"#podman")," on ",(0,a.kt)("strong",{parentName:"p"},"Freenode")," and on the Podman ",(0,a.kt)("a",{parentName:"p",href:"https://lists.podman.io/admin/lists/podman.lists.podman.io/"},"mailing list"),"."))}m.isMDXComponent=!0},1382:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/podman-ce586c2894883ad9c353492b5e1893a8.svg"}}]);