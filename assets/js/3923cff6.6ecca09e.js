"use strict";(self.webpackChunkpodman=self.webpackChunkpodman||[]).push([[82120],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>c});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),m=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},s=function(e){var t=m(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),d=m(n),u=o,c=d["".concat(l,".").concat(u)]||d[u]||h[u]||i;return n?a.createElement(c,r(r({ref:t},s),{},{components:n})):a.createElement(c,r({ref:t},s))}));function c(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=u;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[d]="string"==typeof e?e:o,r[1]=p;for(var m=2;m<i;m++)r[m]=n[m];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},18948:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>p,toc:()=>m});var a=n(87462),o=(n(67294),n(3905));const i={title:"Podman Machine and Boot2podman",layout:"default",author:"afbjorklund",categories:["blogs"],tags:["boot2podman","podman+machine"]},r=void 0,p={permalink:"/blogs/2019/01/14/podman-machine-and-boot2podman",source:"@site/blog/2019-01-14-podman-machine-and-boot2podman.md",title:"Podman Machine and Boot2podman",description:"boot2podman logo",date:"2019-01-14T00:00:00.000Z",formattedDate:"January 14, 2019",tags:[{label:"boot2podman",permalink:"/blogs/tags/boot-2-podman"},{label:"podman+machine",permalink:"/blogs/tags/podman-machine"}],readingTime:2.835,hasTruncateMarker:!0,authors:[{name:"afbjorklund"}],frontMatter:{title:"Podman Machine and Boot2podman",layout:"default",author:"afbjorklund",categories:["blogs"],tags:["boot2podman","podman+machine"]},prevItem:{title:"Managing pods and containers in a local container runtime",permalink:"/blogs/2019/01/15/podman-pods"},nextItem:{title:"RHEl 8 beta and Podman",permalink:"/blogs/2019/01/08/rhel-8-and-podman"}},l={authorsImageUrls:[void 0]},m=[{value:"By Anders F Bj\xf6rklund GitHub",id:"by-anders-f-bj\xf6rklund-github",level:2},{value:"Update: September 9, 2021 - Tom Sweeney",id:"update-september-9-2021---tom-sweeney",level:3},{value:"Original Post",id:"original-post",level:2},{value:"Podman Machine",id:"podman-machine",level:2},{value:"Boot2Podman ISO",id:"boot2podman-iso",level:2},{value:"Remote Access",id:"remote-access",level:2},{value:"Tiny Core",id:"tiny-core",level:2},{value:"Fedora",id:"fedora",level:2}],s={toc:m},d="wrapper";function h(e){let{components:t,...n}=e;return(0,o.kt)(d,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/boot2podman/boot2podman/master/logo.png",alt:"boot2podman logo"})),(0,o.kt)("h1",{id:"podman-machine-and-boot2podman"},"Podman Machine and Boot2podman"),(0,o.kt)("h2",{id:"by-anders-f-bj\xf6rklund-github"},"By Anders F Bj\xf6rklund ",(0,o.kt)("a",{parentName:"h2",href:"https://github.com/afbjorklund"},"GitHub")),(0,o.kt)("h3",{id:"update-september-9-2021---tom-sweeney"},"Update: September 9, 2021 - Tom Sweeney"),(0,o.kt)("p",null,"This post initially discussed the boot2podman/machine project, which Anders has since deprecated. Starting with Podman v3.3, the ",(0,o.kt)("inlineCode",{parentName:"p"},"podman machine")," command now does that same function and is part of the Podman project. Please see Brent Baude's ",(0,o.kt)("a",{parentName:"p",href:"https://podman.io/blogs/2021/09/06/podman-on-macs.html"},"update")," or the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.podman.io/en/latest/machine.html"},"podman machine")," man page on ",(0,o.kt)("a",{parentName:"p",href:"https://docs.podman.io/"},"docs.podman.io")," for more information on how to run Podman machine. The ",(0,o.kt)("inlineCode",{parentName:"p"},"podman-machine")," command has been deprecated."),(0,o.kt)("p",null,"In addition, the Podman team is investigating the possibility of creating ",(0,o.kt)("inlineCode",{parentName:"p"},"Podman Desktop"),". Please see the issue on ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/containers/podman/issues/11494"},"GitHub"),", and please add your comments or thoughts to that issue."),(0,o.kt)("p",null,"More updates are coming, and please keep your eye on the ",(0,o.kt)("a",{parentName:"p",href:"https://podman.io/community/#mailing-list"},"Podman Mailing List")," and ",(0,o.kt)("a",{parentName:"p",href:"https://podman.io"},"podman.io")," for further information and developments."),(0,o.kt)("p",null,"Finally, a very big thank you to Anders for his many contributions to Podman, particularly for his work in getting Podman to work smoothly on macOS."),(0,o.kt)("h2",{id:"original-post"},"Original Post"),(0,o.kt)("p",null,"By using ",(0,o.kt)("inlineCode",{parentName:"p"},"podman-machine")," and indirectly ",(0,o.kt)("inlineCode",{parentName:"p"},"boot2podman"),", it is easy to get started with podman even if your local host does not support it..."),(0,o.kt)("p",null,"It will start a virtual machine, with everything to run containers. This includes ",(0,o.kt)("inlineCode",{parentName:"p"},"podman")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"buildah"),", and remote access over ",(0,o.kt)("inlineCode",{parentName:"p"},"varlink"),"."),(0,o.kt)("p",null,"The command-line tool ",(0,o.kt)("inlineCode",{parentName:"p"},"podman-machine")," is a simple way to create virtual machines running ",(0,o.kt)("inlineCode",{parentName:"p"},"boot2podman.iso"),'.\nIt will create a "machine" with Linux prepared for running Linux containers, with ',(0,o.kt)("a",{parentName:"p",href:"https://podman.io"},"Podman")," and ",(0,o.kt)("a",{parentName:"p",href:"https://buildah.io"},"Buildah")," (and their dependencies) pre-installed."),(0,o.kt)("p",null,"This way any client will be able to run containers, even though not possible on their operating system.\nWhether their Linux distribution is too old or too unprivileged, or if they are running Windows or OS X operating systems without native Linux support."),(0,o.kt)("h2",{id:"podman-machine"},"Podman Machine"),(0,o.kt)("p",null,"Machine lets you create servers with Podman, then configures the Podman clients."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ podman-machine create box\n$ podman-machine ssh box\n\ntc@box:~$ sudo podman\n")),(0,o.kt)("p",null,"Will automatically download the latest version of the ISO, if not available in the cache."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"See:")," ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/boot2podman/machine"},"https://github.com/boot2podman/machine")),(0,o.kt)("h2",{id:"boot2podman-iso"},"Boot2Podman ISO"),(0,o.kt)("p",null,"Boot2podman is a lightweight Linux distribution made specifically to run Linux containers."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Tiny Core Linux 9.x (x86_64)"),(0,o.kt)("li",{parentName:"ul"},"Buildah / Varlink / Podman")),(0,o.kt)("p",null,"The distribution runs entirely from RAM, while persisting the containers and ssh keys."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"See:")," ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/boot2podman/boot2podman"},"https://github.com/boot2podman/boot2podman")),(0,o.kt)("h2",{id:"remote-access"},"Remote Access"),(0,o.kt)("p",null,"It is possible to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"pypodman")," command-line tool, to control podman remotely:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ eval $(podman-machine env box)\n$ pypodman version\n")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/containers/python-podman"},"https://github.com/containers/python-podman")),(0,o.kt)("p",null,"Or alternatively to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"varlink-go")," command-line tool, to access the podman API:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ eval $(podman-machine env box --varlink)\n$ varlink-go call io.podman.GetVersion\n")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/boot2podman/varlink-go"},"https://github.com/boot2podman/varlink-go")),(0,o.kt)("p",null,"Both methods use SSH, in order to access the podman varlink socket of the VM."),(0,o.kt)("p",null,"The SSH keys and other configuration is automatically created with the machine."),(0,o.kt)("h2",{id:"tiny-core"},"Tiny Core"),(0,o.kt)("p",null,"The regular ",(0,o.kt)("inlineCode",{parentName:"p"},"boot2podman.iso")," is based on ",(0,o.kt)("a",{parentName:"p",href:"http://tinycorelinux.net"},"Tiny Core Linux"),":"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/boot2podman/boot2podman/releases"},"https://github.com/boot2podman/boot2podman/releases")),(0,o.kt)("p",null,"This is a minimal system, that runs entirely from RAM and uses ",(0,o.kt)("inlineCode",{parentName:"p"},"init(1)"),"."),(0,o.kt)("p",null,"The package manager uses TCZ packages, handled by the ",(0,o.kt)("inlineCode",{parentName:"p"},"tce-load")," program."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"See:")," ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Tiny_Core_Linux"},"https://en.wikipedia.org/wiki/Tiny_Core_Linux")),(0,o.kt)("h2",{id:"fedora"},"Fedora"),(0,o.kt)("p",null,"There is also an alternative version, based on ",(0,o.kt)("a",{parentName:"p",href:"https://getfedora.org/"},"Fedora Linux"),":"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/boot2podman/boot2podman-fedora-iso/releases"},"https://github.com/boot2podman/boot2podman-fedora-iso/releases")),(0,o.kt)("p",null,"This is a full system, that boots a regular image and uses ",(0,o.kt)("inlineCode",{parentName:"p"},"systemd(1)"),"."),(0,o.kt)("p",null,"The package manager uses RPM packages, handled by the ",(0,o.kt)("inlineCode",{parentName:"p"},"dnf")," program."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"See:")," ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Fedora_(operating_system)"},"https://en.wikipedia.org/wiki/Fedora","_","(operating_system)")),(0,o.kt)("p",null,"Both versions will do the same thing, in that they will both offer the Podman varlink socket."),(0,o.kt)("p",null,'The Podman Machine can set up virtual machines for either, by using the "url" parameters.'),(0,o.kt)("hr",null),(0,o.kt)("p",null,"For more posts about boot2podman, see: ",(0,o.kt)("a",{parentName:"p",href:"https://boot2podman.github.io/"},"https://boot2podman.github.io/")))}h.isMDXComponent=!0}}]);