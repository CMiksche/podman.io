"use strict";(self.webpackChunkpodman=self.webpackChunkpodman||[]).push([[4210],{3905:(e,a,t)=>{t.d(a,{Zo:()=>p,kt:()=>u});var n=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function d(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=n.createContext({}),m=function(e){var a=n.useContext(i),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},p=function(e){var a=m(e.components);return n.createElement(i.Provider,{value:a},e.children)},c="mdxType",s={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},f=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,p=d(e,["components","mdxType","originalType","parentName"]),c=m(t),f=r,u=c["".concat(i,".").concat(f)]||c[f]||s[f]||o;return t?n.createElement(u,l(l({ref:a},p),{},{components:t})):n.createElement(u,l({ref:a},p))}));function u(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=f;var d={};for(var i in a)hasOwnProperty.call(a,i)&&(d[i]=a[i]);d.originalType=e,d[c]="string"==typeof e?e:r,l[1]=d;for(var m=2;m<o;m++)l[m]=t[m];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}f.displayName="MDXCreateElement"},934:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>i,contentTitle:()=>l,default:()=>s,frontMatter:()=>o,metadata:()=>d,toc:()=>m});var n=t(7462),r=(t(7294),t(3905));const o={},l=void 0,d={unversionedId:"commands/podman-image/podman-image-prune",id:"commands/podman-image/podman-image-prune",title:"podman-image-prune",description:"% podman-image-prune 1",source:"@site/docs/commands/podman-image/podman-image-prune.md",sourceDirName:"commands/podman-image",slug:"/commands/podman-image/podman-image-prune",permalink:"/docs/commands/podman-image/podman-image-prune",draft:!1,editUrl:"https://github.com/containers/website-new/docs/commands/podman-image/podman-image-prune.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"podman-image-mount",permalink:"/docs/commands/podman-image/podman-image-mount"},next:{title:"podman-image-scp",permalink:"/docs/commands/podman-image/podman-image-scp"}},i={},m=[{value:"NAME",id:"name",level:2},{value:"SYNOPSIS",id:"synopsis",level:2},{value:"DESCRIPTION",id:"description",level:2},{value:"OPTIONS",id:"options",level:2},{value:"<strong>--all</strong>, <strong>-a</strong>",id:"--all--a",level:4},{value:"<strong>--external</strong>",id:"--external",level:4},{value:"<strong>--filter</strong>=<em>filters</em>",id:"--filterfilters",level:4},{value:"<strong>--force</strong>, <strong>-f</strong>",id:"--force--f",level:4},{value:"<strong>--help</strong>, <strong>-h</strong>",id:"--help--h",level:4},{value:"EXAMPLES",id:"examples",level:2},{value:"SEE ALSO",id:"see-also",level:2},{value:"HISTORY",id:"history",level:2}],p={toc:m},c="wrapper";function s(e){let{components:a,...t}=e;return(0,r.kt)(c,(0,n.Z)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"% podman-image-prune 1"),(0,r.kt)("h2",{id:"name"},"NAME"),(0,r.kt)("p",null,"podman-image-prune - Remove all unused images from the local store"),(0,r.kt)("h2",{id:"synopsis"},"SYNOPSIS"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"podman image prune")," ","[",(0,r.kt)("em",{parentName:"p"},"options"),"]"),(0,r.kt)("h2",{id:"description"},"DESCRIPTION"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"podman image prune")," removes all dangling images from local storage. With the ",(0,r.kt)("inlineCode",{parentName:"p"},"all")," option,\nall unused images are deleted (i.e., images not in use by any container)."),(0,r.kt)("p",null,"The image prune command does not prune cache images that only use layers that are necessary for other images."),(0,r.kt)("h2",{id:"options"},"OPTIONS"),(0,r.kt)("h4",{id:"--all--a"},(0,r.kt)("strong",{parentName:"h4"},"--all"),", ",(0,r.kt)("strong",{parentName:"h4"},"-a")),(0,r.kt)("p",null,"Remove dangling images and images that have no associated containers."),(0,r.kt)("h4",{id:"--external"},(0,r.kt)("strong",{parentName:"h4"},"--external")),(0,r.kt)("p",null,"Remove images even when they are used by external containers (e.g., build containers)."),(0,r.kt)("h4",{id:"--filterfilters"},(0,r.kt)("strong",{parentName:"h4"},"--filter"),"=",(0,r.kt)("em",{parentName:"h4"},"filters")),(0,r.kt)("p",null,"Provide filter values."),(0,r.kt)("p",null,"The ",(0,r.kt)("em",{parentName:"p"},"filters")," argument format is of ",(0,r.kt)("inlineCode",{parentName:"p"},"key=value"),". If there is more than one ",(0,r.kt)("em",{parentName:"p"},"filter"),", then pass multiple OPTIONS: ",(0,r.kt)("strong",{parentName:"p"},"--filter")," ",(0,r.kt)("em",{parentName:"p"},"foo=bar")," ",(0,r.kt)("strong",{parentName:"p"},"--filter")," ",(0,r.kt)("em",{parentName:"p"},"bif=baz"),"."),(0,r.kt)("p",null,"Supported filters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"center"},"Filter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("em",{parentName:"td"},"label")),(0,r.kt)("td",{parentName:"tr",align:null},"Only remove images, with (or without, in the case of label!=","[...]"," is used) the specified labels.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("em",{parentName:"td"},"until")),(0,r.kt)("td",{parentName:"tr",align:null},"Only remove images created before given timestamp.")))),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"label")," ",(0,r.kt)("em",{parentName:"p"},"filter")," accepts two formats. One is the ",(0,r.kt)("inlineCode",{parentName:"p"},"label"),"=",(0,r.kt)("em",{parentName:"p"},"key")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"label"),"=",(0,r.kt)("em",{parentName:"p"},"key"),"=",(0,r.kt)("em",{parentName:"p"},"value"),", which removes containers with the specified labels. The other format is the ",(0,r.kt)("inlineCode",{parentName:"p"},"label!"),"=",(0,r.kt)("em",{parentName:"p"},"key")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"label!"),"=",(0,r.kt)("em",{parentName:"p"},"key"),"=",(0,r.kt)("em",{parentName:"p"},"value"),", which removes containers without the specified labels."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"until")," ",(0,r.kt)("em",{parentName:"p"},"filter")," can be Unix timestamps, date formatted timestamps or Go duration strings (e.g. 10m, 1h30m) computed relative to the machine\u2019s time."),(0,r.kt)("h4",{id:"--force--f"},(0,r.kt)("strong",{parentName:"h4"},"--force"),", ",(0,r.kt)("strong",{parentName:"h4"},"-f")),(0,r.kt)("p",null,"Do not provide an interactive prompt for container removal."),(0,r.kt)("h4",{id:"--help--h"},(0,r.kt)("strong",{parentName:"h4"},"--help"),", ",(0,r.kt)("strong",{parentName:"h4"},"-h")),(0,r.kt)("p",null,"Print usage statement"),(0,r.kt)("h2",{id:"examples"},"EXAMPLES"),(0,r.kt)("p",null,"Remove all dangling images from local storage"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ sudo podman image prune\n\nWARNING! This will remove all dangling images.\nAre you sure you want to continue? [y/N] y\nf3e20dc537fb04cb51672a5cb6fdf2292e61d411315549391a0d1f64e4e3097e\n324a7a3b2e0135f4226ffdd473e4099fd9e477a74230cdc35de69e84c0f9d907\n")),(0,r.kt)("p",null,"Remove all unused images from local storage without confirming"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ sudo podman image prune -a -f\nf3e20dc537fb04cb51672a5cb6fdf2292e61d411315549391a0d1f64e4e3097e\n324a7a3b2e0135f4226ffdd473e4099fd9e477a74230cdc35de69e84c0f9d907\n6125002719feb1ddf3030acab1df6156da7ce0e78e571e9b6e9c250424d6220c\n91e732da5657264c6f4641b8d0c4001c218ae6c1adb9dcef33ad00cafd37d8b6\ne4e5109420323221f170627c138817770fb64832da7d8fe2babd863148287fca\n77a57fa8285e9656dbb7b23d9efa837a106957409ddd702f995605af27a45ebe\n\n")),(0,r.kt)("p",null,"Remove all unused images from local storage since given time/hours."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ sudo podman image prune -a --filter until=2019-11-14T06:15:42.937792374Z\n\nWARNING! This will remove all dangling images.\nAre you sure you want to continue? [y/N] y\ne813d2135f17fadeffeea8159a34cfdd4c30b98d8111364b913a91fd930643e9\n5e6572320437022e2746467ddf5b3561bf06e099e8e6361df27e0b2a7ed0b17b\n58fda2abf5042b35dfe04e5f8ee458a3cc26375bf309efb42c078b551a2055c7\n6d2bd30fe924d3414b64bd3920760617e6ced872364bc3bc6959a623252da002\n33d1c829be64a1e1d379caf4feec1f05a892c3ef7aa82c0be53d3c08a96c59c5\nf9f0a8a58c9e02a2b3250b88cc5c95b1e10245ca2c4161d19376580aaa90f55c\n1ef14d5ede80db78978b25ad677fd3e897a578c3af614e1fda608d40c8809707\n45e1482040e441a521953a6da2eca9bafc769e15667a07c23720d6e0cafc3ab2\n\n$ sudo podman image prune -f --filter until=10h\nf3e20dc537fb04cb51672a5cb6fdf2292e61d411315549391a0d1f64e4e3097e\n324a7a3b2e0135f4226ffdd473e4099fd9e477a74230cdc35de69e84c0f9d907\n")),(0,r.kt)("p",null,"Remove all unused images from local storage with label version 1.0"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ sudo podman image prune -a -f --filter label=version=1.0\ne813d2135f17fadeffeea8159a34cfdd4c30b98d8111364b913a91fd930643e9\n5e6572320437022e2746467ddf5b3561bf06e099e8e6361df27e0b2a7ed0b17b\n58fda2abf5042b35dfe04e5f8ee458a3cc26375bf309efb42c078b551a2055c7\n6d2bd30fe924d3414b64bd3920760617e6ced872364bc3bc6959a623252da002\n33d1c829be64a1e1d379caf4feec1f05a892c3ef7aa82c0be53d3c08a96c59c5\nf9f0a8a58c9e02a2b3250b88cc5c95b1e10245ca2c4161d19376580aaa90f55c\n1ef14d5ede80db78978b25ad677fd3e897a578c3af614e1fda608d40c8809707\n45e1482040e441a521953a6da2eca9bafc769e15667a07c23720d6e0cafc3ab2\n\n")),(0,r.kt)("h2",{id:"see-also"},"SEE ALSO"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/docs/podman"},"podman(1)")),", ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/docs/commands/podman-images"},"podman-images(1)"))),(0,r.kt)("h2",{id:"history"},"HISTORY"),(0,r.kt)("p",null,"December 2018, Originally compiled by Brent Baude (bbaude at redhat dot com)\nDecember 2020, converted filter information from docs.docker.com documentation by Dan Walsh (dwalsh at redhat dot com)"))}s.isMDXComponent=!0}}]);