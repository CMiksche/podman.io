"use strict";(self.webpackChunkpodman=self.webpackChunkpodman||[]).push([[45182],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=o.createContext({}),s=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return o.createElement(p.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=s(n),m=a,h=c["".concat(p,".").concat(m)]||c[m]||d[m]||r;return n?o.createElement(h,i(i({ref:t},u),{},{components:n})):o.createElement(h,i({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:a,i[1]=l;for(var s=2;s<r;s++)i[s]=n[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},69834:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var o=n(87462),a=(n(67294),n(3905));const r={title:"New API coming for Podman",layout:"default",author:"baude",categories:["blogs"],tags:["community","open source","podman","hpc","api","REST","API"]},i="New API coming for Podman",l={permalink:"/blogs/2020/01/17/podman-new-api",source:"@site/blog/2020-01-17-podman-new-api.md",title:"New API coming for Podman",description:"podman logo",date:"2020-01-17T00:00:00.000Z",formattedDate:"January 17, 2020",tags:[{label:"community",permalink:"/blogs/tags/community"},{label:"open source",permalink:"/blogs/tags/open-source"},{label:"podman",permalink:"/blogs/tags/podman"},{label:"hpc",permalink:"/blogs/tags/hpc"},{label:"api",permalink:"/blogs/tags/api"},{label:"REST",permalink:"/blogs/tags/rest"}],readingTime:2.38,hasTruncateMarker:!0,authors:[{name:"baude"}],frontMatter:{title:"New API coming for Podman",layout:"default",author:"baude",categories:["blogs"],tags:["community","open source","podman","hpc","api","REST","API"]},prevItem:{title:"New API coming for Podman",permalink:"/blogs/2020/01/17/new"},nextItem:{title:"Bioinformatics with rootless Podman",permalink:"/blogs/2020/01/15/bioinformatics-with-rootless-podman"}},p={authorsImageUrls:[void 0]},s=[{value:"By Brent Baude GitHub",id:"by-brent-baude-github",level:2},{value:"Example",id:"example",level:4}],u={toc:s},c="wrapper";function d(e){let{components:t,...r}=e;return(0,a.kt)(c,(0,o.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"podman logo",src:n(1382).Z,width:"228",height:"61"})),(0,a.kt)("h2",{id:"by-brent-baude-github"},"By Brent Baude ",(0,a.kt)("a",{parentName:"h2",href:"https://github.com/baude"},"GitHub")),(0,a.kt)("p",null,"If you follow the traffic on IRC (#podman on libera.chat) or GitHub from the developers of ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/containers/podman/"},"libpod"),", you might have seen us referencing a new API. We often referred to it as ",(0,a.kt)("em",{parentName:"p"},"apiv2")," and for about a month, there has been an 'apiv2' branch for libpod on GitHub. This week, we have begun to merge that branch but have yet to \u201cwire it up.\u201d"),(0,a.kt)("p",null,"First and foremost, the Golang libpod API remains largely unchanged. What is changing is the API we expose for automation and remote usage. Our previous API was based on the ",(0,a.kt)("a",{parentName:"p",href:"https://varlink.org/"},"varlink")," protocol. But we heard from users that varlink was a hurdle for libpod adoption especially for those who were using the Docker API and its bindings. They simply could not or did not want to rewrite their custom applications for libpod\u2019s new, varlink-based API."),(0,a.kt)("p",null,"The new API is a simpler implementation based on HTTP/REST. We provide two basic groups of endpoints. The first one is for libpod; the second is for Docker compatibility, to ease adoption. The two endpoints are namespaced to keep them separate. Our goal with implementing a portion of the Docker API, is to be as compatible as possible; while similar calls in the libpod API might bring back additional libpod specific information."),(0,a.kt)("p",null,"While these two endpoints work similarly, there are important and somewhat nuanced differences. The Docker API endpoint is useful for existing automation tied to that API and potentially tools like docker-compose."),(0,a.kt)("h4",{id:"example"},"Example"),(0,a.kt)("p",null,"If you wanted a list of images with the libpod endpoint, you would use the following endpoint:"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"<endpoint_base_url>/libpod/images/json")),(0,a.kt)("p",null,"And if you wanted a list of images but in docker-compatibility, you would use:"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"<endpoint_base_url>/images/json")),(0,a.kt)("p",null,"In our proof of concepts, we have tested our endpoint with the ",(0,a.kt)("a",{parentName:"p",href:"https://docker-py.readthedocs.io/en/stable/"},"docker-py")," project. There are of course subtle differences which we are still working on. And there are compatibility endpoints that we can not support like ",(0,a.kt)("inlineCode",{parentName:"p"},"swarm")," which Podman does not support."),(0,a.kt)("p",null,"We are working on a set of Golang bindings for the libpod endpoints. Eventually these bindings will be used to rewire our remote client. The rewire begins after all the libpod endpoints are working and have tests. We plan on working with the upstream community on podman-python support for the new libpod API, enabling python developers fully support for using podman containers."),(0,a.kt)("p",null,"As for the existing varlink code, it has been in maintenance mode already. We will continue to address bugs but no new functionality will be developed. Once the new API is fully implemented, we plan to make a deprecation announcement."),(0,a.kt)("p",null,"We are hopeful these changes help our users and larger community. We hope that the new API helps encourage contributors to help us complete the API as well as write bindings. Look for more information in the near future including status updates as well as how-tos."))}d.isMDXComponent=!0},1382:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/podman-ce586c2894883ad9c353492b5e1893a8.svg"}}]);