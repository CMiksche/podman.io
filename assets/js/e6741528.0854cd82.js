"use strict";(self.webpackChunkpodman=self.webpackChunkpodman||[]).push([[1346],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var m=a.createContext({}),i=function(e){var t=a.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=i(e.components);return a.createElement(m.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,m=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=i(n),c=r,h=d["".concat(m,".").concat(c)]||d[c]||u[c]||o;return n?a.createElement(h,s(s({ref:t},p),{},{components:n})):a.createElement(h,s({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=c;var l={};for(var m in t)hasOwnProperty.call(t,m)&&(l[m]=t[m]);l.originalType=e,l[d]="string"==typeof e?e:r,s[1]=l;for(var i=2;i<o;i++)s[i]=n[i];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8125:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>i});var a=n(7462),r=(n(7294),n(3905));const o={},s=void 0,l={unversionedId:"commands/podman-system/podman-system-prune",id:"commands/podman-system/podman-system-prune",title:"podman-system-prune",description:"% podman-system-prune 1",source:"@site/docs/commands/podman-system/podman-system-prune.md",sourceDirName:"commands/podman-system",slug:"/commands/podman-system/podman-system-prune",permalink:"/website-new/docs/commands/podman-system/podman-system-prune",draft:!1,editUrl:"https://github.com/containers/website-new/docs/commands/podman-system/podman-system-prune.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"podman-system-migrate",permalink:"/website-new/docs/commands/podman-system/podman-system-migrate"},next:{title:"podman-system-renumber",permalink:"/website-new/docs/commands/podman-system/podman-system-renumber"}},m={},i=[{value:"NAME",id:"name",level:2},{value:"SYNOPSIS",id:"synopsis",level:2},{value:"DESCRIPTION",id:"description",level:2},{value:"OPTIONS",id:"options",level:2},{value:"<strong>--all</strong>, <strong>-a</strong>",id:"--all--a",level:4},{value:"<strong>--external</strong>",id:"--external",level:4},{value:"<strong>--filter</strong>=<em>filters</em>",id:"--filterfilters",level:4},{value:"<strong>--force</strong>, <strong>-f</strong>",id:"--force--f",level:4},{value:"<strong>--help</strong>, <strong>-h</strong>",id:"--help--h",level:4},{value:"<strong>--volumes</strong>",id:"--volumes",level:4},{value:"SEE ALSO",id:"see-also",level:2},{value:"HISTORY",id:"history",level:2}],p={toc:i},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"% podman-system-prune 1"),(0,r.kt)("h2",{id:"name"},"NAME"),(0,r.kt)("p",null,"podman","-","system","-","prune - Remove all unused pods, containers, images, networks, and volume data"),(0,r.kt)("h2",{id:"synopsis"},"SYNOPSIS"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"podman system prune")," ","[",(0,r.kt)("em",{parentName:"p"},"options"),"]"),(0,r.kt)("h2",{id:"description"},"DESCRIPTION"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"podman system prune")," removes all unused containers (both dangling and unreferenced), pods, networks, and optionally, volumes from local storage."),(0,r.kt)("p",null,"Use the ",(0,r.kt)("strong",{parentName:"p"},"--all")," option to delete all unused images. Unused images are dangling images as well as any image that does not have any containers based on it."),(0,r.kt)("p",null,"By default, volumes are not removed to prevent important data from being deleted if there is currently no container using the volume. Use the ",(0,r.kt)("strong",{parentName:"p"},"--volumes")," flag when running the command to prune volumes as well."),(0,r.kt)("h2",{id:"options"},"OPTIONS"),(0,r.kt)("h4",{id:"--all--a"},(0,r.kt)("strong",{parentName:"h4"},"--all"),", ",(0,r.kt)("strong",{parentName:"h4"},"-a")),(0,r.kt)("p",null,"Recursively remove all unused pods, containers, images, networks, and volume data. (Maximum 50 iterations.)"),(0,r.kt)("h4",{id:"--external"},(0,r.kt)("strong",{parentName:"h4"},"--external")),(0,r.kt)("p",null,"Removes all leftover container storage files from local storage that are not managed by podman. In normal circumstances no such data should exist, but in case of an unclean shutdown the podman database may be corrupted and cause his."),(0,r.kt)("p",null,"However, when using transient storage mode, the Podman database does not persist. This means containers will leave the writable layers on disk after a reboot. When using a transient store, it is recommended that the ",(0,r.kt)("strong",{parentName:"p"},"podman system prune --external")," command is run during boot."),(0,r.kt)("p",null,"This option is incompatible with ",(0,r.kt)("strong",{parentName:"p"},"--all")," and ",(0,r.kt)("strong",{parentName:"p"},"--filter")," and drops the default behaviour of removing unused resources."),(0,r.kt)("h4",{id:"--filterfilters"},(0,r.kt)("strong",{parentName:"h4"},"--filter"),"=",(0,r.kt)("em",{parentName:"h4"},"filters")),(0,r.kt)("p",null,"Provide filter values."),(0,r.kt)("p",null,"The ",(0,r.kt)("em",{parentName:"p"},"filters")," argument format is of ",(0,r.kt)("inlineCode",{parentName:"p"},"key=value"),". If there is more than one ",(0,r.kt)("em",{parentName:"p"},"filter"),", then pass multiple OPTIONS: ",(0,r.kt)("strong",{parentName:"p"},"--filter")," ",(0,r.kt)("em",{parentName:"p"},"foo=bar")," ",(0,r.kt)("strong",{parentName:"p"},"--filter")," ",(0,r.kt)("em",{parentName:"p"},"bif=baz"),"."),(0,r.kt)("p",null,"Supported filters:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"center"},"Filter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("em",{parentName:"td"},"label")),(0,r.kt)("td",{parentName:"tr",align:null},"Only remove containers and images, with (or without, in the case of label!=","[...]"," is used) the specified labels.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},(0,r.kt)("em",{parentName:"td"},"until")),(0,r.kt)("td",{parentName:"tr",align:null},"Only remove containers and images created before given timestamp.")))),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"label")," ",(0,r.kt)("em",{parentName:"p"},"filter")," accepts two formats. One is the ",(0,r.kt)("inlineCode",{parentName:"p"},"label"),"=",(0,r.kt)("em",{parentName:"p"},"key")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"label"),"=",(0,r.kt)("em",{parentName:"p"},"key"),"=",(0,r.kt)("em",{parentName:"p"},"value"),", which removes containers and images with the specified labels. The other format is the ",(0,r.kt)("inlineCode",{parentName:"p"},"label!"),"=",(0,r.kt)("em",{parentName:"p"},"key")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"label!"),"=",(0,r.kt)("em",{parentName:"p"},"key"),"=",(0,r.kt)("em",{parentName:"p"},"value"),", which removes containers and images without the specified labels."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"until")," ",(0,r.kt)("em",{parentName:"p"},"filter")," can be Unix timestamps, date formatted timestamps, or Go duration strings (e.g. 10m, 1h30m) computed relative to the machine\u2019s time."),(0,r.kt)("h4",{id:"--force--f"},(0,r.kt)("strong",{parentName:"h4"},"--force"),", ",(0,r.kt)("strong",{parentName:"h4"},"-f")),(0,r.kt)("p",null,"Do not prompt for confirmation"),(0,r.kt)("h4",{id:"--help--h"},(0,r.kt)("strong",{parentName:"h4"},"--help"),", ",(0,r.kt)("strong",{parentName:"h4"},"-h")),(0,r.kt)("p",null,"Print usage statement"),(0,r.kt)("h4",{id:"--volumes"},(0,r.kt)("strong",{parentName:"h4"},"--volumes")),(0,r.kt)("p",null,"Prune volumes currently unused by any container"),(0,r.kt)("h2",{id:"see-also"},"SEE ALSO"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/website-new/docs/podman"},"podman(1)")),", ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"/website-new/docs/commands/podman-system/"},"podman-system(1)"))),(0,r.kt)("h2",{id:"history"},"HISTORY"),(0,r.kt)("p",null,"February 2019, Originally compiled by Dan Walsh (dwalsh at redhat dot com)\nDecember 2020, converted filter information from docs.docker.com documentation by Dan Walsh (dwalsh at redhat dot com)"))}u.isMDXComponent=!0}}]);